<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
           xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0">

    <!-- system properties -->
    <ext:property-placeholder placeholder-prefix="$[" placeholder-suffix="]"/>

    <!-- reference to the Cave repository service -->
    <reference id="caveRepositoryService" interface="org.apache.karaf.cave.server.api.CaveRepositoryService"/>

    <!-- Cave repostiroy MBean -->
    <bean id="caveRepositoryMBean" class="org.apache.karaf.cave.server.management.internal.CaveRepositoryMBeanImpl">
        <property name="caveRepositoryService" ref="caveRepositoryService"/>
    </bean>
    <service ref="caveRepositoryMBean" auto-export="interfaces">
        <service-properties>
            <entry key="jmx.objectname" value="org.apache.karaf.cave:type=repository,name=$[karaf.name]"/>
        </service-properties>
    </service>

</blueprint>